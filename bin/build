#!/usr/bin/env bash

DESTINATION=${1:-/Volumes/share/chowdown}
BASEURL=${2:-http://chowdown.local}
BRANCH=$(git branch --show-current)

if ! [ -d "$DESTINATION" ]; then
  echo "Destination does not exist: $DESTINATION"
  exit 1
fi

echo "Building site ($BRANCH) to $DESTINATION"
echo "URL will be $BASEURL"

echo "Go ahead with build?"
select yn in "Yes" "No"; do
  case $yn in
    Yes ) jekyll build -d $DESTINATION -b $BASEURL --trace --incremental; break;;
    No ) echo "Exiting."; exit;;
  esac
done
